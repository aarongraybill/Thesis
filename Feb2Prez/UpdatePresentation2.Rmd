---
title: "Update Presentation, Implementing More (and less) uncertainty"
#subtitle: "Aristic Production and Algorithmic Uncertainty in Streaming Markets"
author: "Aaron Graybill"
date: "02 February 2022"
output:
  xaringan::moon_reader:
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
    includes:
      in_header:
    css: [xaringan-themer.css, bullets.css]
biblio-style: apalike
csl: ../Inputs/apa.csl
bibliography: ../RunningBib.bib
---
```{r setup, include=FALSE}
options(htmltools.dir.version = T)
knitr::opts_chunk$set(fig.width=10,fig.height = 6)
```

```{r xaringan-themer, include=FALSE, warning=FALSE}
library(xaringanthemer)
style_duo_accent(
  primary_color = "#8C2730",
  secondary_color= "#D8E6F2",
  black_color = "#13091C",
  title_slide_background_image = "image (3).jpg",
  #title_slide_background_size = "contain",
  header_font_google = google_font("Playfair Display"),
  text_font_google   = google_font("Average", "300", "300i"),
  code_font_google   = google_font("Fira Mono"),
  text_font_size = "1.5rem",
  footnote_position_bottom = "10px"
)
```


# Outline

1.    Are ranges the right way to discuss 1 period results?
2.    Proxying Talent and how talent impacts revenue
3.    Varying Variance of algorithmic shocks


---
class: left
# Are ranges the right way to discuss 1 period results?
- Probably not because there's too much variation
- Let's explore what the ranges would tell us:

---
```{r, echo=F,message=F,warning=F}
library(ggplot2)
library(dplyr)
library(tidyr)

d <- read.csv("../inputs/SimulationDataWithShocks.csv")

d <- 
  d %>% 
  select(c(nu:I0,winner))

library(tidyr)
d_sum <-
  d %>% 
  group_by(winner) %>% 
  summarise(across(.cols=everything(),range)) %>% 
  mutate(case=case_when(nu==max(nu)~"max",
                        T~"min")) %>% 
  pivot_longer(nu:I0) %>% 
  pivot_wider(names_from = case,values_from = value) %>% 
  rename(parameter=name)

d_long <- 
  d %>% 
  pivot_longer(nu:I0)

cols <- c("A"="#211030", "B"="#255059","C"="#FFBA3D","D"="#8C2730")
strats <- c(expression(underline(z) %->% underline(z)), expression(bar(z) %->% underline(z)),expression(underline(z) %->% bar(z)),expression(bar(z) %->% bar(z)))

p <- ggplot(d_long)+
  geom_violin(aes(x=winner,y=value,fill=winner),alpha=.6)+
  facet_wrap(vars(name),scales = "free_y")+
  theme_bw()+
  ylab("Distribution of Parameters")+
  xlab("Strategy Chosen")+
  theme_xaringan(text_font_size = 10)+
  scale_fill_manual(values = cols, labels = unname(strats))

plotly::ggplotly(p)
  
```
    
---

# Proxying Talent
- As it stands we have no measure of talent
- I will use $\underline{n}$ as a proxy for talent
  - Number of streams per impression from an artist's low-quality worrk
  - It's an artist's baseline quality
- Contrast this to consumer discerningness: $\frac{\overline{n}-\underline{n}}{\underline{n}}$
- Does a small increase in talent lead to proportionally large change in revenue $R''>0$?
  - No, linearity of the model seems to do us dirty, but let's see that:
  
---

# Talent against ex ante utility

```{r,echo=F,message=F,warning=F,dpi=300}
d <- read.csv("/Volumes/GoogleDrive/My Drive/Thesis_Git/Thesis/Inputs/SimulationDataWithShocks.csv")

d <- 
  d %>% 
  mutate(u_max=pmax(uA,uB,uC,uD)) 
  
p <- ggplot(d)+
  geom_point(aes(x=nd,y=u_max,color=winner),alpha=.2)+
  geom_smooth(aes(x=nd,y=u_max,color=winner))+
  theme_xaringan(text_font_size = 12)+
  scale_color_manual(values = cols, labels = unname(strats))+
  xlab("Talent (nd)")+
  ylab("Optimal Utility")
p
#plotly::ggplotly(p)
```


---
# Varying Variance of algorithmic shocks
- Before the standard deviation of an individual shock was 100.
- Now I use powers of ten:
  - 0 , 1, 3.16 , 10, 31.62, 100, 316.22, 1000, 3162, 10000
- Let's see which strategies are most sensitive to increased variance,
  - see which proportion of a strategy switches at given variance:

---
```{r,echo=F,message=F,warning=F,dpi=300}
d <- read.csv("/Volumes/GoogleDrive/My Drive/Thesis_Git/Thesis/Inputs/SimulationDataWithShocks_multiple_variance.csv")


d_sum <- 
  d %>% 
  group_by(var,winner) %>% 
  summarise(diff=mean(different),
            n_switches=sum(different))

ggplot(d_sum)+
  geom_line(aes(x=var,y=diff,col=winner),size=1)+
  scale_x_log10()+
  xlab("Variance In Simulation")+
  ylab("Proportion who switch from ex ante Strategy")+
  theme_xaringan(text_font_size = 15)+
  scale_color_manual(values = cols, labels = unname(strats))
```

---
```{r,echo=F,dpi=300}
ggplot(d_sum %>% filter(var!=0))+
  geom_area(aes(x=var,y=n_switches/9908,fill=winner),alpha=.7)+
  scale_x_log10()+
  xlab("Variance In Simulation")+
  ylab("Fraction who switch from ex ante Strategy")+
  ggtitle("Same thing, probably less instructive")+
  theme_xaringan(text_font_size = 15)+
  scale_fill_manual(values = cols, labels = unname(strats))
```